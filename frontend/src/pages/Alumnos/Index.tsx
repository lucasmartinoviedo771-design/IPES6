import React from 'react';import { Box, Typography, Grid, Paper, ButtonBase, List, ListItem, ListItemIcon, ListItemText, Divider, Chip } from '@mui/material';import { useNavigate } from 'react-router-dom';import SchoolIcon from '@mui/icons-material/School';import AssignmentIcon from '@mui/icons-material/Assignment';import SwapHorizIcon from '@mui/icons-material/SwapHoriz';import DescriptionIcon from '@mui/icons-material/Description';import EventNoteIcon from '@mui/icons-material/EventNote';import TimelineIcon from '@mui/icons-material/Timeline';interface QuickActionProps {  title: string;  description: string;  icon: React.ReactNode;  path: string;}const QuickActionCard: React.FC<QuickActionProps> = ({ title, description, icon, path }) => {  const navigate = useNavigate();  return (    <Grid item xs={12} sm={6} md={4}>      <ButtonBase        onClick={() => navigate(path)}        sx={{          width: '100%', textAlign: 'left', p: 2, borderRadius: 2,          border: '2px solid', borderColor: 'divider',          transition: 'all .15s ease', height: '100%',          '&:hover': {            bgcolor: 'rgba(46,125,50,0.05)',            borderColor: 'success.main'          },          '&:focus-visible': {            outline: 'none',            bgcolor: 'rgba(46,125,50,0.08)',            borderColor: 'success.main',            boxShadow: '0 0 0 3px rgba(46,125,50,0.2)'          },          '&:hover .qa-icon, &:focus-visible .qa-icon': {            color: 'success.main'          },        }}      >        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>          <Box className="qa-icon" sx={{ fontSize: 40, color: 'text.secondary', transition: 'color .15s ease' }}>{icon}</Box>          <Box sx={{ minWidth: 0 }}>            <Typography variant="h6">{title}</Typography>            <Typography              variant="body2"              color="text.secondary"              sx={{                display: '-webkit-box',                WebkitLineClamp: 2,                WebkitBoxOrient: 'vertical',                overflow: 'hidden',                minHeight: '3em'              }}            >              {description}            </Typography>          </Box>        </Box>      </ButtonBase>    </Grid>  );};const AlumnosIndex: React.FC = () => {  const navigate = useNavigate();  type Estado = 'proximamente' | 'en_curso' | 'expirado';  const estadoLabel: Record<Estado, string> = {    proximamente: 'Próximamente',    en_curso: 'En curso',    expirado: 'Expirado',  };  const estadoColor: Record<Estado, 'default' | 'primary' | 'secondary' | 'error' | 'info' | 'success' | 'warning'> = {    proximamente: 'info',    en_curso: 'success',    expirado: 'default',  };  const estadoDesc: Record<Estado, (titulo: string) => string> = {    proximamente: (t) => `Se informará pronto la fecha para inscribirte en "${t}".`,    en_curso: (t) => `Inscripciones abiertas para "${t}".`,    expirado: (t) => `El periodo de "${t}" ha finalizado.`,  };  const eventos: Array<{ key: string; titulo: string; icon: React.ReactNode; path: string; estado: Estado }> = [    { key: 'insc-carrera', titulo: 'Inscripción a Carreras', icon: <SchoolIcon />, path: '/alumnos/inscripcion-carrera', estado: 'proximamente' },    { key: 'insc-materia', titulo: 'Inscripción a Materias', icon: <AssignmentIcon />, path: '/alumnos/inscripcion-materia', estado: 'proximamente' },    { key: 'cambio-comision', titulo: 'Cambio de Comisión', icon: <SwapHorizIcon />, path: '/alumnos/cambio-comision', estado: 'proximamente' },    { key: 'pedido-analitico', titulo: 'Pedido de Analítico', icon: <DescriptionIcon />, path: '/alumnos/pedido-analitico', estado: 'proximamente' },    { key: 'mesa-examen', titulo: 'Mesa de Examen', icon: <EventNoteIcon />, path: '/alumnos/mesa-examen', estado: 'proximamente' },  ];  return (    <Box sx={{ p: 3 }}>      <Typography variant="h4" gutterBottom>Portal de Alumnos</Typography>      <Typography variant="body1" paragraph>Aquí puedes gestionar tus solicitudes y trámites académicos.</Typography>      {/* Grupo: Trayectoria */}      <Typography variant="subtitle1" fontWeight={700} sx={{ mt: 2 }}>Trayectoria</Typography>      <Typography variant="body2" color="text.secondary">Explora tu historial completo, mesas y recomendaciones en un panel dedicado.</Typography>      <Grid container spacing={2} sx={{ mt: 1 }} justifyContent="flex-start" alignItems="stretch">        <QuickActionCard          title="Trayectoria del Estudiante"          description="Historial completo, mesas/notas y sugerencias de inscripción."          icon={<TimelineIcon />}          path="/alumnos/trayectoria"        />      </Grid>      {/* Grupo: Inscripciones */}      <Typography variant="subtitle1" fontWeight={700} sx={{ mt: 3 }}>Inscripciones</Typography>      <Typography variant="body2" color="text.secondary">Accesos rapidos para inscribirte y gestionar tramites academicos.</Typography>      <Grid container spacing={2} sx={{ mt: 1 }} justifyContent="flex-start" alignItems="stretch">        {/* Card Inscripción a Carreras removida (módulo formalizar desde Secretaría) */}        <QuickActionCard          title="Inscripción a Materias"          description="Inscríbete a las materias de tu plan de estudio."          icon={<AssignmentIcon />}          path="/alumnos/inscripcion-materia"        />        <QuickActionCard          title="Cambio de Comisión"          description="Solicita un cambio de comisión para alguna materia."          icon={<SwapHorizIcon />}          path="/alumnos/cambio-comision"        />        <QuickActionCard          title="Pedido de Analítico"          description="Solicita tu certificado analítico."          icon={<DescriptionIcon />}          path="/alumnos/pedido-analitico"        />        <QuickActionCard          title="Mesa de Examen"          description="Inscríbete a mesas de examen (parciales, finales, libres, extraordinarias)."          icon={<EventNoteIcon />}          path="/alumnos/mesa-examen"        />        {/* moved to Trayectoria group */}{false && (<QuickActionCard          title="Trayectoria del Estudiante"          description="Historial completo, mesas/notas y sugerencias de inscripción."          icon={<TimelineIcon />}          path="/alumnos/trayectoria"        />)}      </Grid>      {/* Próximos eventos */}      <Paper elevation={0} sx={{ mt: 4, border: '1px solid', borderColor: 'divider', borderRadius: 2 }}>        <Box sx={{ p: 2, pb: 1 }}>          <Typography variant="h6" fontWeight={700}>Próximos eventos</Typography>          <Typography variant="body2" color="text.secondary">Fechas relevantes vinculadas a tus gestiones</Typography>        </Box>        <Divider />        <List>          {eventos.map((e, idx) => (            <React.Fragment key={e.key}>              <ListItem onClick={() => navigate(e.path)} sx={{ alignItems: 'flex-start', cursor: 'pointer' }}>                <ListItemIcon sx={{ minWidth: 40, color: 'text.secondary' }}>{e.icon}</ListItemIcon>                <ListItemText                  primary={                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>                      <Typography variant="subtitle1" fontWeight={600}>{e.titulo}</Typography>                      <Chip size="small" label={estadoLabel[e.estado]} color={estadoColor[e.estado]} sx={{ borderRadius: 1 }} />                    </Box>                  }                  secondary={<Typography variant="body2" color="text.secondary">{estadoDesc[e.estado](e.titulo)}</Typography>}                />              </ListItem>              {idx < eventos.length - 1 && <Divider />}            </React.Fragment>          ))}        </List>      </Paper>    </Box>  );};export default AlumnosIndex;